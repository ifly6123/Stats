/* ========================================================= */
/* ★ GLOBAL STYLES & RESETS ★                                */
/* ========================================================= */

:root {
    --bg-color: #f0f4f8; /* Light grey-blue background */
    --card-bg: #ffffff;
    --text-color: #333;
    --heading-color: #1a253c; /* Dark blue */
    --primary-blue: #007bff;
    --accent-orange: #fd7e14;
    --accent-red: #dc3545;
    --accent-green: #28a745;
    --accent-purple: #6f42c1;
    --grey-light: #e9ecef;
    --grey-medium: #ced4da;
    --grey-dark: #6c757d;
    --font-primary: 'Inter', sans-serif;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 6px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
    --border-radius: 12px;
}

body {
    font-family: var(--font-primary);
    background-color: var(--bg-color);
    color: var(--text-color);
    margin: 0;
    padding: 20px;
    line-height: 1.6;
}

h1, h2, h3, h4 {
    color: var(--heading-color);
    font-weight: 700;
}

a {
    color: var(--primary-blue);
    text-decoration: none;
    transition: color 0.2s ease;
}

    a:hover {
        color: #0056b3;
    }

/* --- Utilities --- */
.error-message {
    color: var(--accent-red);
    font-weight: 600;
    margin-top: 15px;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    border-radius: 6px;
    padding: 10px 15px;
}

/* ========================================================= */
/* ★ HEADER & NAVIGATION ★                                   */
/* ========================================================= */
header {
    text-align: center;
    margin-bottom: 50px;
}

    header h1 {
        font-size: 2.8rem;
        font-weight: 800; /* Bolder */
        margin-bottom: 5px;
        /* Fancy Gradient Text */
        background: linear-gradient(90deg, var(--primary-blue), var(--accent-purple), var(--accent-green));
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
    }

    header p {
        font-size: 1.15rem;
        color: var(--grey-dark);
        max-width: 650px;
        margin: 0 auto;
    }

.breadcrumb {
    font-size: 0.9rem;
    margin-bottom: 25px;
    color: var(--grey-dark);
}

    .breadcrumb a {
        color: var(--primary-blue);
        font-weight: 500;
    }

    .breadcrumb span {
        font-weight: 600;
        color: var(--heading-color);
    }

/* ========================================================= */
/* ★ HOMEPAGE MODULE CARDS ★                                */
/* ========================================================= */
.module-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 30px;
    max-width: 1400px;
    margin: 0 auto;
}

.module-card {
    background-color: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 3px solid transparent; /* Border for hover effect */
}

    .module-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: var(--shadow-lg);
    }

    /* Module-specific hover borders */
    .module-card:has(h2[style*="#007bff"]):hover {
        border-color: #007bff;
    }
    /* Module 1 */
    .module-card:has(h2[style*="#fd7e14"]):hover {
        border-color: #fd7e14;
    }
    /* Module 2 */
    .module-card:has(h2[style*="#dc3545"]):hover {
        border-color: #dc3545;
    }
    /* Module 3 */
    .module-card:has(h2[style*="#28a745"]):hover {
        border-color: #28a745;
    }
    /* Module 4 */
    .module-card:has(h2[style*="#6f42c1"]):hover {
        border-color: #6f42c1;
    }
    /* Module 5 */
    .module-card:has(h2[style*="#6c757d"]):hover {
        border-color: #6c757d;
    }
/* Study Guides */

.card-viz-container {
    height: 180px;
    background-color: var(--grey-light);
    padding: 20px;
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    position: relative;
    overflow: hidden;
}

.card-content {
    padding: 25px;
}

    .card-content h2 {
        margin-top: 0;
        margin-bottom: 10px;
        font-weight: 700;
    }

    .card-content p {
        font-size: 0.95rem;
        line-height: 1.6;
        color: #444;
    }

/* --- Homepage Card Animations --- */
/* Add back the specific animations for #viz-1, #viz-2 etc. from previous steps if desired */
/* Viz 1: Histogram */
@keyframes bounce-bar {
    0%, 100% {
        transform: scaleY(0.2);
    }

    50% {
        transform: scaleY(1);
    }
}

.viz-bar {
    width: 18%;
    background-color: #007bff;
    opacity: 0.7;
    border-radius: 4px 4px 0 0;
    animation: bounce-bar 1.5s ease-in-out infinite;
    transform-origin: bottom;
}
/* Viz 2: Scatter Plot */
@keyframes fade-in-dot {
    0%, 100% {
        opacity: 0.2;
    }

    50% {
        opacity: 1;
    }
}

@keyframes draw-line {
    0% {
        transform: scaleX(0);
    }

    100% {
        transform: scaleX(1);
    }
}

.viz-dot {
    width: 12px;
    height: 12px;
    background-color: #fd7e14;
    border-radius: 50%;
    position: absolute;
    animation: fade-in-dot 1.8s ease-in-out infinite;
}

.viz-line {
    width: 90%;
    height: 3px;
    background-color: rgba(0,0,0,0.3);
    position: absolute;
    top: 75%;
    left: 5%;
    transform-origin: left;
    animation: draw-line 2s ease-out alternate infinite;
    transform: rotate(-35deg) translate(-20px, 15px);
}
/* Viz 3: Bell Curve */
@keyframes shade-p {
    0%, 100% {
        opacity: 0.2;
        transform: scaleX(0.5);
    }

    50% {
        opacity: 0.8;
        transform: scaleX(1);
    }
}

#viz-3 svg {
    width: 100%;
    height: 100%;
}

.viz-p-value {
    animation: shade-p 2.2s ease-in-out infinite;
    transform-origin: 75px 50px;
}
/* Viz 4: Plot Grid */
@keyframes fill-square {
    0%, 100% {
        background-color: rgba(40, 167, 69, 0.2);
        transform: scale(0.95);
    }

    50% {
        background-color: rgba(40, 167, 69, 0.7);
        transform: scale(1);
    }
}

.viz-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    gap: 10px;
    width: 100%;
    height: 100%;
    align-content: center;
}

.grid-square {
    width: 100%;
    padding-bottom: 100%;
    position: relative;
    border-radius: 4px;
    animation: fill-square 2s ease-in-out infinite;
    color: #fff;
    font-weight: 600;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 0;
    padding: 50% 0;
    height: 0;
}
/* Viz 5: Grid Pulse */
@keyframes grid-pulse {
    0%, 100% {
        background-color: rgba(111, 66, 193, 0.2);
    }

    50% {
        background-color: rgba(111, 66, 193, 0.6);
    }
}

#viz-5 {
    display: grid !important;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
    align-items: center;
    justify-content: center;
}

.viz-grid-cell {
    background-color: #6f42c1;
    color: white;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 4px;
    padding: 10px 5px;
    text-align: center;
    animation: grid-pulse 2s ease-in-out infinite;
}

    .viz-grid-cell:nth-child(2) {
        animation-delay: 0.2s;
    }

    .viz-grid-cell:nth-child(3) {
        animation-delay: 0.4s;
    }

    .viz-grid-cell:nth-child(4) {
        animation-delay: 0.6s;
    }
/* Study Guides Viz */
#viz-study {
    display: flex !important;
    align-items: center;
    justify-content: center;
}

    #viz-study svg {
        opacity: 0.6;
    }


/* ========================================================= */
/* ★ MODULE PAGE LAYOUT & TABS ★                             */
/* ========================================================= */
.module-header {
    text-align: center;
    margin-bottom: 30px;
    border-bottom: 1px solid var(--grey-medium);
    padding-bottom: 20px;
}

    .module-header p {
        font-size: 1.1rem;
        color: var(--grey-dark);
    }

/* Module Specific Title Gradients */
.gradient-text-blue {
    background: linear-gradient(45deg, #007bff, #4ca9ff);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.gradient-text-orange {
    background: linear-gradient(45deg, #fd7e14, #ffaf6e);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.gradient-text-red {
    background: linear-gradient(45deg, #dc3545, #ff6b7b);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.gradient-text-green {
    background: linear-gradient(45deg, #28a745, #53d476);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.gradient-text-purple {
    background: linear-gradient(45deg, #6f42c1, #a787e8);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.gradient-text-grey {
    background: linear-gradient(45deg, #6c757d, #adb5bd);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.module-header h1 {
    font-size: 2.5rem;
    font-weight: 800;
}
/* Make module titles bold */


/* --- Tab Navigation --- */
.tab-nav {
    display: flex;
    border-bottom: 2px solid var(--grey-medium);
    margin-bottom: 30px;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}

.tab-link {
    font-family: var(--font-primary);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--grey-dark);
    background: none;
    border: none;
    padding: 15px 25px;
    cursor: pointer;
    border-bottom: 4px solid transparent; /* Thicker border */
    transition: color 0.2s, border-color 0.2s;
    margin-bottom: -2px; /* Aligns with the bottom border */
}

    .tab-link:hover {
        color: var(--heading-color);
    }

    .tab-link.active {
        color: var(--heading-color); /* Use heading color for active */
        /* Dynamic border color based on module */
    }
/* Module specific tab underlines */
#module-1-tabs .tab-link.active {
    border-color: var(--primary-blue);
    color: var(--primary-blue);
}
/* Module 2 tab nav needs ID */
#module-3-tabs .tab-link.active {
    border-color: var(--accent-red);
    color: var(--accent-red);
}
/* Module 4 tab nav needs ID */
/* Module 5 tab nav needs ID */
#analysis-tabs .tab-link.active {
    border-color: var(--accent-purple);
    color: var(--accent-purple);
}


/* Tab Content Layout */
.tab-content {
    display: none;
}

    .tab-content.active {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        animation: fadeIn 0.5s ease;
    }

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
}

.viz-container, .viz-container-large {
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    padding: 15px;
    flex: 2;
    min-width: 400px;
}

.viz-container-large {
    flex: 3;
    min-width: 500px;
}

.controls-container {
    flex: 1;
    min-width: 300px;
}

    .controls-container h2 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.4rem;
    }

    .controls-container p {
        font-size: 0.95rem;
        color: var(--grey-dark);
        margin-bottom: 20px;
    }

/* ========================================================= */
/* ★ FORMS, BUTTONS, TABLES ★                             */
/* ========================================================= */
/* --- Buttons --- */
.btn-primary, .btn-secondary, .btn-danger {
    font-family: var(--font-primary);
    font-size: 1rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
    text-align: center;
}

    .btn-primary:hover, .btn-secondary:hover, .btn-danger:hover {
        transform: translateY(-2px);
    }

.btn-primary {
    background-color: var(--primary-blue);
    color: white;
}

    .btn-primary:hover {
        background-color: #0056b3;
    }

.btn-secondary {
    background-color: var(--grey-dark);
    color: white;
}

    .btn-secondary:hover {
        background-color: #5a6268;
    }

.btn-danger {
    background-color: var(--accent-red);
    color: white;
}

    .btn-danger:hover {
        background-color: #c82333;
    }

button:disabled {
    background-color: #adb5bd;
    cursor: not-allowed;
    transform: none !important;
}

/* --- Input Fields & Selects --- */
input[type="number"], input[type="text"], select, textarea {
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    font-family: var(--font-primary);
    border-radius: 8px;
    border: 2px solid var(--grey-medium);
    transition: border-color 0.2s, box-shadow 0.2s;
    box-sizing: border-box; /* Include padding in width */
}

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: var(--primary-blue);
        box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
    }

textarea {
    min-height: 100px;
}

label {
    font-weight: 600;
    margin-bottom: 5px;
    display: block;
}

.control-group {
    margin-bottom: 20px;
}

/* --- Sliders (Module 3) --- */
.slider { /* ... Keep existing slider styles ... */
    -webkit-appearance: none;
    width: 100%;
    height: 10px;
    border-radius: 5px;
    background: #e9ecef;
    outline: none;
    opacity: 0.9;
    transition: opacity .2s;
}

    .slider:hover {
        opacity: 1;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent-red);
        cursor: pointer;
    }

    .slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent-red);
        cursor: pointer;
    }

/* --- Tables --- */
.anova-table, .contingency-table, .data-entry-grid {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 15px;
    font-size: 0.95rem;
}

    .anova-table th, .contingency-table th, .data-entry-grid th,
    .anova-table td, .contingency-table td, .data-entry-grid td {
        border: 1px solid var(--grey-medium);
        padding: 10px 12px;
        text-align: left;
        vertical-align: middle;
    }

    .anova-table thead th, .contingency-table thead th, .data-entry-grid thead th {
        background-color: var(--grey-light);
        font-weight: 700;
    }

    .anova-table tbody th, .contingency-table tbody th, .data-entry-grid tbody th {
        background-color: #f8f9fa; /* Lighter shade for row headers */
        font-weight: 600;
    }
    /* Right align numbers in ANOVA */
    .anova-table td:not(:first-child) {
        text-align: right;
        font-family: 'Courier New', Courier, monospace;
    }

/* --- Stats Box --- */
.stats-box {
    background: #f8f9fa;
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    border: 1px solid var(--grey-light);
}

    .stats-box h4 {
        margin-top: 0;
        margin-bottom: 10px;
    }

.stat {
    display: flex;
    justify-content: space-between;
    font-size: 1rem;
    padding: 8px 0;
    border-bottom: 1px solid var(--grey-light);
}

    .stat:last-child {
        border-bottom: none;
    }

    .stat strong {
        color: #333;
    }

    .stat span {
        font-weight: 600;
        color: var(--primary-blue);
    }

.stat-large {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.1rem;
    padding: 10px 0;
    border-bottom: 1px solid var(--grey-light);
}

    .stat-large strong {
        color: #333;
    }

    .stat-large span {
        font-weight: 700;
        font-size: 1.2rem;
    }

/* Significance Result Box */
.stat-result {
    padding: 15px;
    margin-top: 10px;
    border-radius: 8px;
    text-align: center;
    font-size: 1.1rem;
    font-weight: 700;
    transition: background-color 0.3s, color 0.3s;
}

    .stat-result.not-significant {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeeba;
    }

    .stat-result.significant {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }


/* ========================================================= */
/* ★ D3.js VISUALIZATION STYLES ★                            */
/* ========================================================= */
.axis path, .axis line {
    stroke: #aaa;
}

.axis text {
    font-family: var(--font-primary);
    font-size: 0.8rem;
    fill: #555;
}

svg text {
    user-select: none;
}
/* Prevent text selection in charts */

/* Module 1 */
#histogram-plot .bar {
    fill: var(--primary-blue);
    opacity: 0.8;
}

#simulation-plot .bar {
    fill: var(--accent-green);
}

.annotations .sd-line {
    stroke-opacity: 0.8;
}

.annotations .sd-label {
    font-size: 0.7rem;
    font-weight: 600;
}

.annotations-sim .sd-line {
    stroke-opacity: 0.8;
}
/* Added */
.annotations-sim .sd-label {
    font-size: 0.7rem;
    font-weight: 600;
}
/* Added */
.intro-text {
    font-size: 0.9rem;
    color: var(--grey-dark);
    margin-bottom: 10px;
    text-align: center;
}
/* Added */

/* Module 2 */
#scatterplot {
    cursor: crosshair;
    background: #fff;
    border-radius: 8px;
}

.data-point {
    fill: var(--accent-orange);
    opacity: 0.7;
    stroke: #fff;
    stroke-width: 1.5px;
}

.regression-line {
    stroke: var(--primary-blue);
    stroke-width: 2.5px;
    stroke-dasharray: 6 4;
    opacity: 0;
    transition: opacity 0.3s;
}

/* Module 3 */
.dist-path {
    stroke-width: 0;
    stroke-linejoin: round;
    stroke-linecap: round;
}
/* Removed stroke */
#stat-t-value span, #stat-chi-value span {
    color: var(--primary-blue);
}
/* Blue t/chi */
#stat-p-value span, #stat-chi-p-value span {
    color: var(--accent-red);
}
/* Red p */
/* Contingency Table */
.contingency-table .cell-data {
    text-align: center;
    font-size: 1.1rem;
    font-weight: 600;
    line-height: 1.4;
}

.expected-val {
    font-size: 0.85rem;
    font-weight: 400;
    color: var(--accent-red);
    display: block;
}

.btn-add {
    background-color: var(--accent-green);
    color: white;
    border: none;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    font-size: 1.1rem;
    font-weight: 600;
    line-height: 1;
    cursor: pointer;
    margin-top: 5px;
    transition: background-color 0.2s;
}

    .btn-add:hover {
        background-color: #218838;
    }

.chi-key {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 20px;
}

.key-obs {
    font-weight: 600;
    color: #000;
    margin: 0 5px;
}

.key-exp {
    font-weight: 600;
    color: var(--accent-red);
    margin: 0 5px;
}


/* Module 4 */
#plot-tooltip {
    display: none;
    position: absolute;
    background-color: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    pointer-events: none;
    line-height: 1.5;
    z-index: 10;
}

#field-plot-1 .plot, #field-plot-2 .plot {
    transition: fill 0.3s ease;
    cursor: pointer;
}
/* Added cursor */
#field-plot-1 .plot-label, #field-plot-2 .plot-label-small {
    pointer-events: none;
    fill: rgba(0,0,0,0.7);
}
/* Darker label */
.legend {
    list-style: none;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid var(--grey-light);
    border-radius: 8px;
    background: #f8f9fa;
}

    .legend li {
        display: flex;
        align-items: center;
        margin-bottom: 5px;
        font-weight: 500;
        font-size: 0.9rem;
    }

.legend-color {
    display: inline-block;
    width: 18px;
    height: 18px;
    border-radius: 4px;
    margin-right: 8px;
}

#interaction-plot {
    background: var(--card-bg);
    border: 1px solid var(--grey-light);
    border-radius: 8px;
}

.interaction-line {
    fill: none;
    stroke-width: 2.5px;
    stroke-linecap: round;
}

.interaction-dot {
    stroke: white;
    stroke-width: 1.5px;
}

/* Module 5 */
.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid var(--grey-light);
    padding-bottom: 10px;
    margin-bottom: 20px;
}

    .panel-header h2 {
        border: none;
        padding: 0;
        margin: 0;
    }

#show-paste-btn {
    padding: 8px 15px;
    font-size: 0.9rem;
}

#paste-data-container {
    background: #f0f4f8;
    border: 1px dashed var(--grey-medium);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

    #paste-data-container p {
        font-size: 0.9rem;
        color: var(--grey-dark);
        margin-top: 0;
    }

    #paste-data-container ul {
        font-size: 0.9rem;
        margin-top: 5px;
        margin-bottom: 10px;
        padding-left: 20px;
    }

#paste-data-area {
    width: 100%;
    border: 1px solid var(--grey-medium);
    border-radius: 4px;
    padding: 10px;
    font-family: monospace;
    font-size: 0.9rem;
    margin-bottom: 10px;
}

#paste-data-container button {
    margin-right: 10px;
}

.data-entry-grid td {
    padding: 4px;
}
/* Tighter grid padding */
.grid-value-input {
    height: 38px;
    padding: 5px;
}

.lsd-grid td {
    padding: 6px 3px;
}
/* LSD grid specific padding */
.grid-lsd-treatment {
    width: 90%;
    padding: 4px;
    font-size: 0.85rem;
    margin-bottom: 3px;
}

.grid-lsd-value {
    width: 90%;
    padding: 4px;
    font-size: 0.85rem;
    font-weight: 600;
}

#tab-heatmap svg {
    display: block;
    margin: 0 auto 15px auto;
    background: var(--card-bg);
    border: 1px solid var(--grey-light);
    border-radius: 4px;
}

#tab-graphs svg {
    display: block;
    margin: 10px auto;
    background: var(--card-bg);
    border: 1px solid var(--grey-light);
    border-radius: 8px;
}


/* ========================================================= */
/* ★ STUDY GUIDES ★                                          */
/* ========================================================= */
.study-guide-toc {
    max-width: 900px;
    margin: 30px auto;
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    padding: 30px 40px;
}

    .study-guide-toc h2 {
        text-align: center;
        color: var(--heading-color);
        margin-bottom: 30px;
    }

.toc-section {
    margin-bottom: 25px;
    border-bottom: 1px solid var(--grey-light);
    padding-bottom: 15px;
}

    .toc-section:last-child {
        border-bottom: none;
        padding-bottom: 0;
    }

    .toc-section h3 {
        color: var(--primary-blue);
        margin-bottom: 10px;
    }

    .toc-section ul {
        list-style: none;
        padding-left: 0;
    }

    .toc-section li {
        margin-bottom: 8px;
    }

    .toc-section a {
        color: var(--primary-blue);
        font-weight: 500;
        transition: color 0.2s;
    }

        .toc-section a:hover {
            color: #0056b3;
            text-decoration: underline;
        }

        .toc-section a[href*="coming-soon"], .toc-section a[href="#"] {
            color: var(--grey-dark);
            font-style: italic;
            pointer-events: none;
        }

.guide-content {
    max-width: 800px;
    margin: 30px auto;
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    padding: 30px 40px;
    font-size: 1.05rem;
    line-height: 1.7;
}

    .guide-content h2, .guide-content h3 {
        color: var(--accent-green);
        margin-top: 25px;
        border-bottom: 2px solid var(--grey-light);
        padding-bottom: 5px;
    }

    .guide-content blockquote {
        border-left: 4px solid var(--primary-blue);
        background: #e7f3ff;
        padding: 10px 15px;
        margin: 15px 0;
        font-family: monospace;
        font-size: 0.95rem;
    }

    .guide-content ul {
        padding-left: 25px;
    }

    .guide-content li {
        margin-bottom: 8px;
    }

/* Responsive adjustments if needed */
@media (max-width: 768px) {
    body {
        padding: 10px;
    }

    header h1 {
        font-size: 2.2rem;
    }

    .module-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    /* Stack cards on mobile */
    .workbench-wrapper {
        grid-template-columns: 1fr;
    }
    /* Stack workbench panels */
    #panel-setup, #panel-data, #panel-analysis {
        grid-area: auto;
    }
}
/* --- STUDY GUIDE - HISTOGRAM GAME --- */
.histogram-game {
    background: #f8f9fa; /* Light background for the game area */
    border: 1px solid var(--grey-medium);
    border-radius: var(--border-radius);
    padding: 20px;
    margin-top: 30px;
    display: flex;
    flex-wrap: wrap; /* Allow wrapping on small screens */
    gap: 20px;
    align-items: center;
}

.game-chart-container {
    height: 200px;
    width: 250px;
    background: #fff;
    border: 1px solid var(--grey-medium);
    display: flex;
    align-items: flex-end; /* Bars grow from bottom */
    border-radius: 4px;
    overflow: hidden; /* Hide any slight overflow */
}

.game-bar {
    background-color: var(--primary-blue);
    opacity: 0.7;
    border-right: 1px solid #fff; /* Small gap between bars */
    transition: height 0.3s ease;
}

    .game-bar:last-child {
        border-right: none;
    }

.game-controls {
    flex: 1; /* Take remaining space */
    min-width: 200px;
}

    .game-controls p {
        font-weight: 600;
        margin-bottom: 10px;
    }

.game-choice-btn {
    display: inline-block;
    background-color: #fff;
    border: 2px solid var(--grey-medium);
    color: var(--text-color);
    padding: 8px 15px;
    margin: 5px;
    border-radius: 20px; /* Pill shape */
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s, transform 0.1s;
}

    .game-choice-btn:hover {
        background-color: var(--grey-light);
        border-color: var(--grey-dark);
        transform: translateY(-1px);
    }

    .game-choice-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        background-color: var(--grey-light);
    }

#game-feedback {
    margin-top: 15px;
    font-weight: bold;
    min-height: 1.5em; /* Reserve space */
}

    #game-feedback.correct {
        color: var(--accent-green);
    }

    #game-feedback.incorrect {
        color: var(--accent-red);
    }

#next-shape-btn {
    margin-top: 10px;
}
/* --- STUDY GUIDE - DISPERSION VISUALIZER --- */
.interactive-calc.dark-bg {
    background: #f8f9fa; /* Light grey bg */
    border-color: #ced4da;
    padding: 20px 25px;
}

#dispersion-plot-container {
    background: #ffffff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px 5px 0 5px; /* Padding for plot */
}

.plot-note {
    font-size: 0.8rem;
    color: var(--grey-dark);
    text-align: center;
    font-style: italic;
    margin: 5px 0 0 0;
}

/* Make stats boxes in this grid smaller */
.calc-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    gap: 10px;
    margin: 20px 0 0 0;
}

.calc-stat-box.compact {
    padding: 10px;
}

    .calc-stat-box.compact strong {
        font-size: 0.8rem;
        text-transform: uppercase;
    }

    .calc-stat-box.compact span {
        font-size: 1.3rem;
    }
/* Color code the MAD and SD boxes */
#mad-box-disp span {
    color: var(--primary-blue);
}

#sd-box-disp span {
    color: var(--accent-purple);
}

#mean-box-disp span {
    color: var(--accent-red);
}


/* Annotation styling for dispersion plot */
#dispersion-plot .data-dot {
    fill: var(--grey-dark);
    opacity: 0.6;
    transition: cx 0.3s ease;
}

#dispersion-plot .mean-line {
    stroke: var(--accent-red);
    stroke-width: 3px;
    stroke-linecap: round;
}

#dispersion-plot .plot-label-mean {
    fill: var(--accent-red);
    font-size: 0.8rem;
    font-weight: 700;
    text-anchor: middle;
}

#dispersion-plot .plot-label-mad {
    fill: var(--primary-blue);
    font-size: 0.8rem;
    font-weight: 600;
}

#dispersion-plot .plot-label-sd {
    fill: var(--accent-purple);
    font-size: 0.8rem;
    font-weight: 600;
}
/* --- STUDY GUIDE - STANDARD ERROR VIZ --- */
.se-viz-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}

.se-plot-box {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
}

    .se-plot-box strong {
        text-align: center;
        display: block;
        font-size: 0.9rem;
        color: var(--heading-color);
    }

    .se-plot-box svg {
        display: block;
        width: 100%;
    }

.se-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
}

    .se-controls .control-group {
        flex-grow: 1;
        margin: 0;
    }

        .se-controls .control-group label {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

    .se-controls .se-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .se-controls .btn-secondary {
        background-color: var(--primary-blue);
    }

        .se-controls .btn-secondary:hover {
            background-color: #0056b3;
        }

    .se-controls .btn-primary {
        background-color: var(--accent-green);
    }

        .se-controls .btn-primary:hover {
            background-color: #218838;
        }

/* D3 Plot styles for SE viz */
#se-plot-population .sample {
    transition: all 0.1s ease;
}

#se-plot-means .mean-bar {
    fill: var(--accent-green);
    opacity: 0.8;
    stroke: #fff;
    stroke-width: 0.5px;
}

@media (max-width: 768px) {
    .se-viz-container {
        grid-template-columns: 1fr; /* Stack plots on mobile */
    }

    .se-controls {
        flex-direction: column;
        align-items: stretch;
    }
}
/* --- STUDY GUIDE - STANDARD ERROR VIZ (Enhanced) --- */

/* Tooltip */
#se-tooltip {
    display: none;
    position: absolute;
    background-color: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    pointer-events: none; /* So it doesn't block mouse events */
    line-height: 1.5;
    z-index: 10;
}

/* Plot Box Titles */
.se-plot-box strong {
    font-size: 1rem; /* Slightly larger title */
}

.n-val-display {
    color: var(--primary-blue);
    font-weight: 800;
}

/* Population/Sample Plot Styles */
#se-plot-population .pop {
    fill: #adb5bd;
    opacity: 0.5;
}

#se-plot-population .sample {
    fill: var(--primary-blue);
    opacity: 0.7;
    stroke: #0056b3;
    stroke-width: 0.5px;
}

#se-plot-population .mean-line {
    stroke-width: 2.5px;
    opacity: 0.8;
}

#se-plot-population .pop-mean {
    stroke: #343a40; /* Dark grey */
}

#se-plot-population .sample-mean {
    stroke: var(--primary-blue);
    stroke-dasharray: 4 4;
}

#se-plot-population .sd-range {
    fill: #6c757d; /* Medium grey */
    opacity: 0.15;
}

/* Sample Means Plot Styles */
#se-plot-means .mean-bar {
    fill: var(--accent-green);
    opacity: 0.8;
}

#se-plot-means .mean-line {
    stroke-width: 2.5px;
    opacity: 0.8;
}

#se-plot-means .mean-of-means {
    stroke: #e63946; /* Red */
}

#se-plot-means .se-range {
    fill: var(--accent-green);
    opacity: 0.2;
}

/* Bar hover effect */
#se-plot-population .pop:hover,
#se-plot-population .sample:hover,
#se-plot-means .mean-bar:hover {
    fill: #e63946; /* Highlight in red */
    opacity: 1;
}
/* --- STUDY GUIDE - CORRELATION VISUALS --- */
.correlation-visuals {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

    .correlation-visuals div {
        text-align: center;
        background: #f8f9fa;
        border: 1px solid var(--grey-light);
        border-radius: 8px;
        padding: 10px;
    }

    .correlation-visuals img { /* Placeholder for [Image] tag */
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 4px;
        background-color: var(--grey-light);
        margin-bottom: 10px;
    }

    .correlation-visuals strong {
        display: block;
        margin-bottom: 5px;
        color: var(--heading-color);
    }

    .correlation-visuals p {
        font-size: 0.85rem;
        line-height: 1.5;
        color: var(--grey-dark);
        margin-bottom: 0;
    }
/* --- STUDY GUIDE - CORRELATION INTERACTIVE PLOT --- */
.interactive-calc .corr-plot-container {
    flex: 2; /* Plot takes more space */
    min-width: 300px;
}

.interactive-calc .corr-controls {
    flex: 1; /* Controls take less space */
    min-width: 200px;
}

    .interactive-calc .corr-controls h4 {
        margin-top: 0;
        margin-bottom: 10px;
        color: var(--heading-color);
    }

    .interactive-calc .corr-controls p {
        font-size: 0.9rem;
        color: var(--grey-dark);
        margin-bottom: 15px;
    }

.data-dot-interactive {
    fill: var(--primary-blue);
    stroke: #fff;
    stroke-width: 2px;
    cursor: grab;
    transition: fill 0.2s;
}

    .data-dot-interactive:hover {
        fill: var(--accent-orange);
    }

#corr-r-box {
    padding: 20px;
    transition: background-color 0.3s, color 0.3s;
}

    #corr-r-box strong {
        color: inherit; /* Inherit color from parent */
        font-size: 1rem;
    }

    #corr-r-box span {
        font-size: 2.5rem;
        font-family: 'Courier New', Courier, monospace;
        transition: color 0.3s;
    }

    #corr-r-box.positive span {
        color: var(--primary-blue);
    }

    #corr-r-box.negative span {
        color: var(--accent-red);
    }
/* --- STUDY GUIDE - REGRESSION INTERACTIVE PLOT --- */
.interactive-calc .corr-plot-container {
    flex: 2;
    min-width: 300px;
}

.interactive-calc .corr-controls {
    flex: 1;
    min-width: 200px;
}

    .interactive-calc .corr-controls h4 {
        margin-top: 0;
        margin-bottom: 10px;
        color: var(--heading-color);
    }

    .interactive-calc .corr-controls p {
        font-size: 0.9rem;
        color: var(--grey-dark);
        margin-bottom: 15px;
    }

.data-dot-interactive {
    fill: var(--primary-blue);
    stroke: #fff;
    stroke-width: 2px;
    cursor: grab;
    transition: fill 0.2s;
}

    .data-dot-interactive:hover {
        fill: var(--accent-orange);
    }

#regression-plot-interactive .regression-line {
    stroke: var(--accent-red);
    stroke-width: 2.5px;
    stroke-dasharray: 6 4;
    opacity: 1;
}

#reg-equation-box {
    padding: 15px;
    background-color: #fff;
    border: 1px solid var(--grey-light);
    margin-bottom: 10px;
}

    #reg-equation-box strong {
        font-size: 0.9rem;
        color: var(--grey-dark);
    }

    #reg-equation-box span {
        display: block;
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--accent-red);
        font-family: 'Courier New', Courier, monospace;
    }

#reg-r-box {
    padding: 15px;
    transition: background-color 0.3s, color 0.3s;
}

    #reg-r-box strong {
        color: inherit;
        font-size: 0.9rem;
    }

    #reg-r-box span {
        display: block;
        font-size: 1.3rem;
        font-weight: 700;
        font-family: 'Courier New', Courier, monospace;
        transition: color 0.3s;
    }

    #reg-r-box.positive span {
        color: var(--primary-blue);
    }

    #reg-r-box.negative span {
        color: var(--accent-red);
    }
/* --- STUDY GUIDE - CORRELATION VS CAUSATION QUIZ --- */
.interactive-calc p strong {
    color: var(--heading-color);
}

#quiz-options {
    margin: 15px 0;
}

.quiz-choice-btn {
    display: block; /* Make buttons stack */
    width: 100%;
    text-align: left;
    background-color: #fff;
    border: 2px solid var(--grey-medium);
    color: var(--text-color);
    padding: 10px 15px;
    margin-bottom: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s, transform 0.1s;
    font-weight: 500;
}

    .quiz-choice-btn:hover {
        background-color: var(--grey-light);
        border-color: var(--grey-dark);
        transform: translateY(-1px);
    }

    .quiz-choice-btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        background-color: var(--grey-light);
    }

    .quiz-choice-btn.correct {
        background-color: #d4edda; /* Green background */
        border-color: var(--accent-green);
        color: #155724;
        font-weight: 700;
    }

    .quiz-choice-btn.incorrect {
        background-color: #f8d7da; /* Red background */
        border-color: var(--accent-red);
        color: #721c24;
        font-weight: 700;
    }

#quiz-feedback {
    margin-top: 15px;
    font-weight: bold;
    min-height: 1.5em; /* Reserve space */
}

    #quiz-feedback.correct {
        color: var(--accent-green);
    }

    #quiz-feedback.incorrect {
        color: var(--accent-red);
    }
/* --- STUDY GUIDE - P-VALUE SIMULATOR --- */
#pvalue-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px 5px 0 5px;
    overflow: hidden; /* Hide anything outside axis */
}

#pvalue-plot svg {
    display: block;
    width: 100%;
}

#pvalue-plot .zone-label {
    font-size: 0.8rem;
    font-weight: 600;
}

    #pvalue-plot .zone-label.reject {
        fill: var(--accent-red);
    }

    #pvalue-plot .zone-label.fail-reject {
        fill: var(--accent-green);
    }

.pvalue-controls {
    margin-top: 15px;
    text-align: center;
}

    .pvalue-controls p {
        font-size: 1rem;
        color: var(--grey-dark);
        margin-bottom: 10px;
    }

        .pvalue-controls p strong {
            color: var(--accent-red);
            font-weight: 700;
        }

#pvalue-result {
    margin-top: 15px;
    font-weight: 500;
    font-size: 1.1rem;
    min-height: 1.5em; /* Reserve space */
}

    #pvalue-result span {
        font-weight: 700;
    }
/* --- STUDY GUIDE - ERROR SIMULATOR --- */
.error-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    text-align: center;
}

    .error-table th, .error-table td {
        border: 1px solid var(--grey-medium);
        padding: 12px;
    }

    .error-table thead th {
        background: var(--grey-light);
        color: var(--heading-color);
    }

    .error-table tbody th {
        background: #f8f9fa;
        font-weight: 600;
    }

    .error-table .correct-cell {
        background-color: #d4edda; /* Light green */
        color: #155724;
        font-weight: 600;
    }

    .error-table .error-cell {
        background-color: #f8d7da; /* Light red */
        color: #721c24;
        font-weight: 600;
    }

        .error-table .error-cell.type-1 {
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .error-table .error-cell.type-2 {
            font-size: 1.1rem;
            line-height: 1.5;
        }

.simulator-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

@media (max-width: 600px) {
    .simulator-wrapper {
        grid-template-columns: 1fr;
    }
}

.sim-machine {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    text-align: center;
}

    .sim-machine h3 {
        margin-top: 0;
    }

.sim-light {
    display: inline-block;
    padding: 8px 15px;
    border-radius: 20px;
    background: var(--grey-light);
    color: var(--grey-dark);
    font-weight: 700;
    margin: 0 5px 15px 5px;
    transition: all 0.2s ease;
}

    .sim-light.active {
        background: var(--accent-green);
        color: #fff;
        box-shadow: 0 0 10px var(--accent-green);
    }

#truth-light-h0.active {
    background: #ffc107; /* Yellow for "no effect" */
    color: #333;
    box-shadow: 0 0 10px #ffc107;
}

.sim-machine button {
    width: 100%;
    margin-bottom: 10px;
}

.sim-output {
    font-size: 1.2rem;
    font-weight: 500;
    margin-top: 15px;
}

    .sim-output.decision span {
        font-weight: 700;
    }

.sim-results {
    background: #fff;
    border-radius: 8px;
    padding: 20px;
}

    .sim-results h3 {
        margin-top: 0;
        text-align: center;
    }

#sim-feedback {
    min-height: 4.5em; /* Reserve space for 3 lines of text */
    text-align: center;
    border: 1px dashed var(--grey-medium);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 15px;
}

    #sim-feedback p {
        margin: 0;
        font-weight: 600;
        font-size: 1rem;
        line-height: 1.5;
    }

        #sim-feedback p.correct {
            color: var(--accent-green);
        }

        #sim-feedback p.incorrect {
            color: var(--accent-red);
        }

#sim-scorecard td {
    font-size: 1.8rem;
    font-weight: 700;
    font-family: 'Courier New', Courier, monospace;
}
/* --- STUDY GUIDE - T-TEST VISUALIZER --- */
#ttest-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px 5px 0 5px;
    overflow: hidden;
}

#ttest-plot svg {
    display: block;
    width: 100%;
}

#ttest-plot .dist-path {
    mix-blend-mode: multiply; /* Nice overlap effect */
}

.ttest-controls {
    margin-top: 15px;
}

    .ttest-controls .control-group {
        margin-bottom: 10px;
    }

    .ttest-controls .slider {
        /* Use existing slider styles */
    }
    /* Style the slider thumbs for this module */
    .ttest-controls #mean-diff-slider::-webkit-slider-thumb {
        background: var(--primary-blue);
    }

    .ttest-controls #mean-diff-slider::-moz-range-thumb {
        background: var(--primary-blue);
    }

    .ttest-controls #std-dev-slider::-webkit-slider-thumb {
        background: var(--accent-orange);
    }

    .ttest-controls #std-dev-slider::-moz-range-thumb {
        background: var(--accent-orange);
    }

#ttest-conclusion {
    margin-top: 15px;
    font-size: 1.1rem;
    font-weight: 700;
}

#sd-box-disp span {
    transition: color 0.2s ease; /* Animate p-value color change */
}
/* --- STUDY GUIDE - CHI-SQUARE SIMULATOR --- */
.chi-controls {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}

    .chi-controls .btn-primary,
    .chi-controls .btn-secondary {
        flex: 1; /* Make buttons share space */
    }

/* Style the Chi-Square Table */
#chi-table {
    font-size: 1rem;
    text-align: center;
}

    #chi-table th, #chi-table td {
        text-align: center;
        padding: 12px 5px; /* More padding */
    }

    #chi-table .chi-row-expected th,
    #chi-table .chi-row-expected td {
        color: var(--grey-dark);
        font-weight: 600;
    }

    #chi-table .chi-row-observed th,
    #chi-table .chi-row-observed td {
        color: var(--heading-color);
        font-weight: 700;
        font-size: 1.25rem;
    }

    #chi-table .chi-row-calc th,
    #chi-table .chi-row-calc td {
        color: var(--primary-blue);
        font-weight: 600;
        font-family: 'Courier New', Courier, monospace;
    }

#chi-conclusion {
    margin-top: 15px;
    font-size: 1.1rem;
    font-weight: 700;
}
/* --- STUDY GUIDE - ANOVA VISUALIZER --- */
#anova-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px 5px 0 5px;
    overflow: hidden;
}

#anova-plot svg {
    display: block;
    width: 100%;
}

#anova-plot .data-dot-interactive {
    stroke: #000;
    stroke-width: 0.5px;
    opacity: 0.6;
}

#anova-plot .mean-line {
    stroke-opacity: 1;
}

.ttest-controls {
    margin-top: 15px;
}

    .ttest-controls .control-group {
        margin-bottom: 10px;
    }

    .ttest-controls .slider {
        /* Use existing slider styles */
    }
    /* Style the slider thumbs for this module */
    .ttest-controls #anova-mean-slider::-webkit-slider-thumb {
        background: var(--primary-blue);
    }

    .ttest-controls #anova-mean-slider::-moz-range-thumb {
        background: var(--primary-blue);
    }

    .ttest-controls #anova-sd-slider::-webkit-slider-thumb {
        background: var(--accent-orange);
    }

    .ttest-controls #anova-sd-slider::-moz-range-thumb {
        background: var(--accent-orange);
    }

#anova-conclusion {
    margin-top: 15px;
    font-size: 1.1rem;
    font-weight: 700;
}
/* --- STUDY GUIDE - DOE PRINCIPLES VIZ --- */
.doe-viz-controls {
    display: flex;
    justify-content: space-around;
    gap: 10px;
    margin-bottom: 20px;
}

.doe-btn {
    flex: 1;
    padding: 10px 15px;
    font-size: 0.9rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

    .doe-btn#doe-btn-1 {
        background-color: var(--accent-red);
        color: white;
    }

    .doe-btn#doe-btn-2 {
        background-color: var(--primary-blue);
        color: white;
    }

    .doe-btn#doe-btn-3 {
        background-color: var(--accent-green);
        color: white;
    }

    .doe-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }


#doe-plot-container {
    position: relative;
    padding: 10px;
    background: #fff;
    border: 1px solid var(--grey-medium);
    border-radius: 8px;
}

    #doe-plot-container .doe-field-bg {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 8px;
        overflow: hidden;
        /* Gradient to show sun effect */
        background: linear-gradient(90deg, #cce5ff 0%, #fff2d1 100%);
        opacity: 0.4;
    }

    #doe-plot-container .doe-gradient-label {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--grey-dark);
    }

        #doe-plot-container .doe-gradient-label.left {
            left: 15px;
        }

        #doe-plot-container .doe-gradient-label.right {
            right: 15px;
        }


#doe-plot {
    position: relative; /* Make sure D3 plot sits on top of bg */
}

    #doe-plot .plot {
        /* Style for the plots is in the main CSS */
    }

    #doe-plot .plot-label {
        /* Style for labels is in the main CSS */
        pointer-events: none;
    }

#doe-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #doe-feedback p {
        margin: 0;
    }

    #doe-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - DOE PRINCIPLES VIZ (Coffee Test) --- */
.doe-viz-controls {
    display: flex;
    justify-content: space-around;
    gap: 15px;
    margin-bottom: 25px;
}

.doe-btn {
    flex: 1;
    padding: 12px 15px;
    font-size: 0.95rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

    .doe-btn#coffee-btn-1 {
        background-color: var(--accent-red);
        color: white;
    }

    .doe-btn#coffee-btn-2 {
        background-color: var(--accent-green);
        color: white;
    }

    .doe-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

#coffee-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    display: grid;
    gap: 10px;
}

.coffee-customer-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 5px;
}

.customer-label {
    font-weight: 600;
    color: var(--text-color);
    width: 100px; /* Fixed width for alignment */
    text-align: right;
    flex-shrink: 0;
}

.coffee-cup {
    width: 40px;
    height: 40px;
    border-radius: 50%; /* Make them round */
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    border: 2px solid #ccc;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: background-color 0.3s ease, opacity 0.3s ease;
}

#coffee-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #coffee-feedback p {
        margin: 0;
    }

    #coffee-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - DOE PRINCIPLES VIZ (Coffee Station Test) --- */
.doe-viz-controls {
    display: flex;
    justify-content: space-around;
    gap: 15px;
    margin-bottom: 25px;
}

.doe-btn {
    flex: 1;
    padding: 12px 15px;
    font-size: 0.95rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}
    /* Use red/green for bad/good */
    .doe-btn#coffee-btn-1 {
        background-color: var(--accent-red);
        color: white;
    }

    .doe-btn#coffee-btn-2 {
        background-color: var(--accent-green);
        color: white;
    }

    .doe-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

#coffee-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
}

.station-environment-label {
    display: flex;
    justify-content: space-between;
    font-style: italic;
    font-size: 0.9rem;
    color: var(--grey-dark);
    padding: 0 10px 10px 10px;
    border-bottom: 2px dashed var(--grey-light);
    margin-bottom: 15px;
}

.coffee-station-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
}

@media (max-width: 600px) {
    .coffee-station-row {
        grid-template-columns: 1fr; /* Stack stations on mobile */
    }
}

.coffee-station {
    border: 1px solid var(--grey-light);
    border-radius: 8px;
    background: #fdfdfd;
}

.station-label {
    font-weight: 600;
    font-size: 0.85rem;
    text-align: center;
    padding: 8px;
    background: var(--grey-light);
    border-bottom: 1px solid var(--grey-medium);
    border-radius: 8px 8px 0 0;
}

.coffee-cup-name {
    display: block;
    width: 100%;
    height: 60px;
    padding: 10px;
    box-sizing: border-box; /* Include padding in height */
    color: white;
    font-weight: 700;
    font-size: 0.9rem;
    text-align: center;
    border-radius: 0 0 8px 8px;
    line-height: 1.3;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease, opacity 0.3s ease;
}

#coffee-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #coffee-feedback p {
        margin: 0;
    }

    #coffee-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - DOE PRINCIPLES VIZ (Customer Assignment) --- */
.doe-viz-controls.multi-button {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 25px;
    align-items: center;
}

.doe-viz-controls .control-group {
    flex-basis: 200px;
    margin: 0;
}

    .doe-viz-controls .control-group label {
        font-size: 0.9rem;
        margin-bottom: 5px;
    }

    .doe-viz-controls .control-group input {
        padding: 8px;
        font-size: 1rem;
    }

.doe-viz-controls .doe-btn {
    flex: 1;
    min-width: 150px;
    padding: 12px 15px;
    font-size: 0.95rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.doe-btn#assign-btn-1 {
    background-color: var(--accent-red);
    color: white;
}

.doe-btn#assign-btn-2 {
    background-color: var(--accent-green);
    color: white;
}

.doe-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

#station-plot-container {
    background: #fdfdfd;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
    position: relative;
}

    #station-plot-container .station-environment-label {
        display: flex;
        justify-content: space-between;
        font-style: italic;
        font-size: 0.9rem;
        color: var(--grey-dark);
        padding: 0 10px 10px 10px;
        border-bottom: 2px dashed var(--grey-light);
        margin-bottom: 5px;
    }

    #station-plot-container svg {
        display: block;
        width: 100%;
    }

.customer-station rect {
    fill: #fff;
    stroke: var(--grey-medium);
    rx: 8; /* Rounded corners */
}

.customer-station text {
    font-size: 0.8rem;
    font-weight: 600;
    fill: var(--grey-dark);
    text-anchor: middle;
}

.customer-dot {
    opacity: 0.8;
    stroke: #333;
    stroke-width: 1px;
}

#assign-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #assign-feedback p {
        margin: 0;
    }

    #assign-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - CRD VISUALIZER --- */
#crd-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
    position: relative;
}

#crd-plot {
    position: relative;
    background: var(--grey-light); /* Lab bench color */
}

    #crd-plot .plot {
        /* Base plot styles already in main CSS */
    }

    #crd-plot .plot-label {
        /* Base label styles already in main CSS */
        pointer-events: none;
        fill: white;
        opacity: 0.9;
    }

#crd-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #crd-feedback p {
        margin: 0;
    }

    #crd-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - RBD VISUALIZER --- */
#rbd-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
    position: relative;
    overflow: hidden; /* To contain gradient */
}

#rbd-plot {
    position: relative; /* Sits on top of bg */
}

    #rbd-plot .plot {
        /* Base styles already present */
    }

    #rbd-plot .plot-label {
        pointer-events: none;
        fill: white;
        opacity: 0.9;
    }

.rbd-results-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 15px;
}

.rbd-result-box {
    background: #fff;
    border: 1px solid var(--grey-medium);
    border-radius: 8px;
    padding: 15px;
}

    .rbd-result-box strong {
        display: block;
        font-size: 1.1rem;
        color: var(--heading-color);
        margin-bottom: 8px;
    }

    .rbd-result-box .feedback-small {
        font-style: italic;
        font-size: 0.9rem;
        color: var(--grey-dark);
        margin-top: 8px;
        display: block;
    }

#crd-result-box strong {
    color: var(--accent-red);
}

#rbd-result-box strong {
    color: var(--accent-green);
}
/* --- STUDY GUIDE - RBD VIZ (10x3 update) --- */
#rbd-plot-container.large-plot {
    max-width: 300px; /* Narrower to fit the 10x3 shape */
    margin: 0 auto; /* Center it */
}

#rbd-plot {
    position: relative;
}

.rbd-results-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 15px;
}

.rbd-result-box {
    background: #fff;
    border: 1px solid var(--grey-medium);
    border-radius: 8px;
    padding: 15px;
}

    .rbd-result-box strong {
        display: block;
        font-size: 1.1rem;
        color: var(--heading-color);
        margin-bottom: 8px;
    }

    .rbd-result-box .feedback-small {
        font-style: italic;
        font-size: 0.9rem;
        color: var(--grey-dark);
        margin-top: 8px;
        display: block;
    }

#crd-result-box strong {
    color: var(--accent-red);
}

#rbd-result-box strong {
    color: var(--accent-green);
}
/* --- STUDY GUIDE - LSD VISUALIZER --- */
#lsd-grid-container {
    padding: 10px 0;
}

.lsd-input-grid {
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    border-collapse: separate;
    border-spacing: 5px; /* Add spacing */
}

    .lsd-input-grid th {
        background: none;
        text-align: right;
        font-size: 0.9rem;
        color: var(--grey-dark);
    }

    .lsd-input-grid thead th {
        text-align: center;
    }

    .lsd-input-grid td {
        padding: 0;
        border: none;
    }

.lsd-input {
    width: 100%;
    height: 60px;
    padding: 10px;
    box-sizing: border-box; /* Include padding */
    text-align: center;
    font-size: 1.8rem;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: 8px;
    border: 2px solid var(--grey-medium);
}

    .lsd-input:focus {
        border-color: var(--primary-blue);
        box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
        outline: none;
    }

    .lsd-input.error {
        border-color: var(--accent-red);
        background-color: #f8d7da;
    }

@media (max-width: 400px) {
    .lsd-input {
        height: 50px;
        font-size: 1.3rem;
    }
}

.lsd-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
}

    .lsd-controls .doe-btn {
        flex: 1;
        max-width: 200px;
        background-color: var(--primary-blue);
        color: white;
    }

    .lsd-controls #lsd-fill-btn {
        background-color: var(--grey-dark);
    }

#lsd-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #lsd-feedback p {
        margin: 0;
    }
/* --- STUDY GUIDE - INTERACTION PLOT VIZ --- */
#interaction-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
    overflow: hidden;
}

#interaction-plot-viz svg {
    display: block;
    width: 100%;
}

#interaction-plot-viz .line-label {
    font-weight: 600;
    font-size: 0.85rem;
}

#interaction-plot-viz .data-dot-interactive {
    stroke: #fff;
    stroke-width: 2px;
    cursor: grab;
}

    #interaction-plot-viz .data-dot-interactive:hover {
        stroke-width: 3px;
        stroke: var(--accent-orange);
    }

#interaction-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #interaction-feedback p {
        margin: 0;
    }

    #interaction-feedback strong {
        font-size: 1.1rem;
    }
/* --- STUDY GUIDE - TRANSFORMATION VIZ --- */
.transform-viz-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}

.transform-plot-box {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 10px;
}

    .transform-plot-box strong {
        text-align: center;
        display: block;
        font-size: 1rem;
        color: var(--heading-color);
    }

    .transform-plot-box svg {
        display: block;
        width: 100%;
    }

    .transform-plot-box rect {
        mix-blend-mode: multiply; /* See overlaps */
    }

.transform-controls {
    display: flex;
    gap: 20px;
    align-items: flex-end; /* Align button with select */
}

    .transform-controls .control-group {
        flex: 1;
    }

    .transform-controls .btn-primary {
        flex: 1;
        max-height: 45px; /* Match input height */
    }

/* Make result boxes in this module green/red */
#raw-result-box {
    background-color: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
}

#transformed-result-box.significant {
    background-color: #d4edda;
    border-color: #c3e6cb;
    color: #155724;
}

@media (max-width: 768px) {
    .transform-viz-container {
        grid-template-columns: 1fr; /* Stack plots on mobile */
    }
}
/* --- STUDY GUIDE - MISSING PLOT VIZ --- */
#missing-plot-container {
    text-align: center;
}

#missing-plot-table {
    max-width: 600px;
    margin: 0 auto;
}

    #missing-plot-table td.missing {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-red);
        background: #f8d7da;
    }

    #missing-plot-table td.estimated {
        font-weight: 700;
        color: var(--accent-green);
        background: #d4edda;
    }

.estimated-star {
    color: var(--accent-green);
    font-weight: 700;
    margin-left: 2px;
}

.missing-plot-arrow {
    font-size: 2.5rem;
    margin: 10px 0;
    display: none; /* Hidden by default */
}

.calc-formula-box {
    background: #fff;
    border: 1px solid var(--grey-medium);
    border-radius: 8px;
    padding: 20px;
    max-width: 600px;
    margin: 10px auto;
    text-align: left;
}

    .calc-formula-box h4 {
        margin-top: 0;
        color: var(--heading-color);
        border-bottom: 1px solid var(--grey-light);
        padding-bottom: 10px;
    }

    .calc-formula-box p {
        margin: 5px 0 10px;
        line-height: 1.6;
    }

    .calc-formula-box hr {
        margin: 15px 0;
        border: 0;
        border-top: 1px solid var(--grey-light);
    }

#missing-calc-steps h4 {
    border: none;
    font-size: 1.2rem;
    text-align: center;
}

    #missing-calc-steps h4 strong {
        color: var(--accent-green);
        font-size: 1.4rem;
    }

#missing-calc-steps .feedback-small {
    font-style: italic;
    font-size: 0.9rem;
    color: var(--grey-dark);
    margin-top: 8px;
    display: block;
    text-align: center;
}
/* --- STUDY GUIDE - SPLIT PLOT VIZ --- */
#split-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.split-plot-legend {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: 600;
}

.legend-swatch {
    padding: 2px 10px;
    border-radius: 4px;
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    background: #ccc;
    border: 1px solid rgba(0,0,0,0.5);
}

.legend-swatch-small {
    padding: 2px 8px;
    border-radius: 4px;
    color: #333;
    font-weight: 700;
    font-size: 0.9rem;
    background: #f8f9fa;
    border: 1px solid var(--grey-medium);
}

#split-plot-viz {
    position: relative;
    background: #fdfdfd;
    padding-left: 90px; /* Space for main plot labels */
}

    #split-plot-viz svg {
        display: block;
        width: 100%;
    }

    #split-plot-viz .main-plot {
        /* Main plot styles are set in JS */
    }

    #split-plot-viz .sub-plot-label {
        pointer-events: none;
        fill: #000;
        opacity: 0.9;
    }

    #split-plot-viz .main-plot-label {
        pointer-events: none;
        font-weight: 700;
    }

#split-plot-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #split-plot-feedback p {
        margin: 0;
    }
/* --- STUDY GUIDE - SPLIT PLOT VIZ --- */
#split-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.split-plot-legend {
    display: flex;
    flex-wrap: wrap; /* Allow wrapping */
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: 600;
}

.legend-swatch {
    padding: 2px 10px;
    border-radius: 4px;
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    background: #ccc;
    border: 1px solid rgba(0,0,0,0.5);
}

.legend-swatch-small {
    padding: 2px 8px;
    border-radius: 4px;
    color: #333;
    font-weight: 700;
    font-size: 0.9rem;
    background: #f8f9fa;
    border: 1px solid var(--grey-medium);
}

#split-plot-viz {
    position: relative;
    background: #fdfdfd;
    /* Removed padding-left, now handled by SVG margin */
}

    #split-plot-viz svg {
        display: block;
        width: 100%;
    }

    #split-plot-viz .main-plot {
        stroke-opacity: 0.5;
    }

    #split-plot-viz .sub-plot-label {
        pointer-events: none;
        fill: #000;
        opacity: 0.9;
    }

    #split-plot-viz .main-plot-label {
        pointer-events: none;
        font-weight: 700;
    }

#split-plot-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #split-plot-feedback p {
        margin: 0;
    }
/* --- STUDY GUIDE - STRIP PLOT VIZ --- */
#strip-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.split-plot-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: 600;
}

.legend-swatch {
    padding: 2px 10px;
    border-radius: 4px;
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    background: #ccc;
    border: 1px solid rgba(0,0,0,0.5);
}

.legend-swatch-small {
    padding: 2px 8px;
    border-radius: 4px;
    color: #333;
    font-weight: 700;
    font-size: 0.9rem;
    background: #f8f9fa;
    border: 1px solid var(--grey-medium);
}

#strip-plot-viz {
    position: relative;
    background: #fdfdfd;
    max-width: 350px; /* Keep it from getting too wide */
    margin: 0 auto;
}

    #strip-plot-viz svg {
        display: block;
        width: 100%;
    }

    #strip-plot-viz .plot {
        /* Base plot styles */
    }

    #strip-plot-viz .plot-label {
        pointer-events: none;
        fill: #000;
        opacity: 0.9;
    }

    #strip-plot-viz .row-axis-label,
    #strip-plot-viz .col-axis-label {
        font-size: 0.9rem;
        font-weight: 700;
    }

#strip-plot-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #strip-plot-feedback p {
        margin: 0;
    }
/* --- STUDY GUIDE - STRIP PLOT VIZ (Dynamic) --- */
#strip-plot-container {
    background: #fff;
    border-radius: 8px;
    border: 1px solid var(--grey-medium);
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.split-plot-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    font-weight: 600;
}

.legend-swatch {
    padding: 2px 10px;
    border-radius: 4px;
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    background: #ccc;
    border: 1px solid rgba(0,0,0,0.5);
}

.legend-swatch-small {
    padding: 2px 8px;
    border-radius: 4px;
    color: #333;
    font-weight: 700;
    font-size: 0.9rem;
    background: #f8f9fa;
    border: 1px solid var(--grey-medium);
}

#strip-plot-viz {
    position: relative;
    background: #fdfdfd;
    max-width: 500px; /* Max width */
    margin: 0 auto;
    overflow-x: auto; /* Allow scrolling if grid is too wide */
}

    #strip-plot-viz h3 {
        text-align: center;
        font-size: 1.1rem;
        color: var(--heading-color);
    }

    #strip-plot-viz svg {
        display: block;
        width: 100%;
    }

    #strip-plot-viz .plot {
        /* Base plot styles */
    }

    #strip-plot-viz .plot-label {
        pointer-events: none;
        fill: #000;
        opacity: 0.9;
    }

    #strip-plot-viz .row-axis-label,
    #strip-plot-viz .col-axis-label {
        font-size: 0.9rem;
        font-weight: 700;
    }

#strip-plot-feedback {
    margin-top: 15px;
    font-size: 1.05rem;
    line-height: 1.6;
}

    #strip-plot-feedback p {
        margin: 0;
    }

/* ========================================================= */
/* ★ GLOBAL FOOTER (Created by...) ★                         */
/* ========================================================= */
body::after {
    content: "Created and Designed by Debapratim Bose";
    display: block; /* Makes it a full-width block */
    text-align: center;
    padding: 25px 20px;
    margin-top: 50px; /* Adds space above the footer */
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--grey-dark); /* Uses the grey color from our design */
    border-top: 1px solid var(--grey-medium); /* Adds a nice separator line */
}